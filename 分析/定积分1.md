[toc]

## 定积分存在的一般条件
前面已经讨论过了,如果函数在区间[a,b]是可积的,那么函数$f(x)$在$[a,b]$上必须是有界的.这个是定积分存在的一个必要条件.

所以我们的讨论都在函数有界作为前提.
对于$[a,b]$上的分割$P:a=x_0 < x_1 < ...<x_n=b$

那么函数在每一个小的子区间上的$[x_{k-1},x_k]$上具有有限的下确界和上确界,这个也是必然的.$$m_k =\inf_{x \in [x_{k-1},x_k]}f(x),M_k =\sup_{x \in [x_{k-1},x_k]}f(x)$$
记$w_k = M_k - m_k$
进一步的，对于整个区间，定义$$m =\inf_{x \in [a,b]}f(x),M =\sup_{x \in [a,b]}f(x)$$
记$w = M - m$

[**引理**]给定分割$P:a=x_0 < x_1 < ...<x_n=b$,$\forall k \in [1,n]$必然有$M_k -m_k \le M-m$.

proof:

首先肯定有$M \ge M_k,m \le m_k$

那么$M_k-m_k \le M-m_k \le M-m$

$\blacksquare$

[**定义**]
我们分别把数
$$
L(f,P)=\sum_{i=1}^{n}m_i\Delta x_i \\
U(f,P)=\sum_{i=1}^{n}M_i\Delta x_i
$$
一般又称其为达布下和和达布上和．

函数关于分割Ｐ的一起积分和即黎曼和$\sigma(f,P,\xi)$都会介于达布下和和达布上和之间．

$$L(f,P) \le \sigma(f,P,\xi) \le U(f,P)$$

并且，对于给定的分割$P$,应该有
$$\inf_{\xi}\sigma(f,P,\xi) = L(f,P),\sup_{\xi}\sigma(f,P,\xi)=U(f,P)$$
这里$\inf_{\xi}\sigma(f,P,\xi)，\sup_{\xi}\sigma(f,P,\xi)$分别表示对一切可能的$\xi$取$\sigma(f,P,\xi)$的下确界和上确界．

[**引理１**]对于$[a,b]$的分割$P:a =x_0 \le x_1 < ... < x_n=b$如果在$P$上添加一个新的分点$x' \in [x_{k-1},x_{k}]$而成新的分割$P'$.我们有一下结论:
(1)$L(f,P) \le L(f,P')\le L(f,P) + w |P|$
(2)$U(f,P) \ge U(f,P') \le U(f,P)-w |P|$
proof:

（１）
对于新的分割$P=a=x_0 < x_1< ...<x_{k-1}  < x_k < ...<x_n=b$
所以$L(f,P)=\sum_{i=1}^{n}m_i \Delta x_i$

对于新的分割$P'=a=x_0 < x_1< ...<x_{k-1} < x' < x_k < ...<x_n=b$
所以$L(f,P')=\sum_{i=1}^{n+1}m_i '\Delta x_i'$

$L(f,P') - L(f,P)=\inf_{x \in [x_{k-1},x']}f(x)(x'-x_{k-1}) + \inf_{x \in [x',x_{k}]}f(x)(x_{k}-x') - \inf_{x \in [x_{k-1},x_k]}f(x)(x_k-x_{k-1})$

为了方便起见，不妨记
$$m_k = \inf_{x \in [x_{k-1},x_k]}f(x),m_k'=\inf_{x \in [x_{k-1},x']}f(x),m_k''=\inf_{x \in [x',x_{k}]}f(x)$$

那么$L(f,P') - L(f,P)=m_k'(x'-x_{k-1}) + m_k''(x_k-x')-m_k(x_k-x_{k-1})=(x'-x_{k-1})(m_k'-m_k) + (x_k-x')(m_k''-m_k)$
毫无疑问的是$m_k \le m_k' \le M_k,m_k \le m_k'' \le M_k$
所以$L(f,P') - L(f,P) \ge 0$
进一步的是$(x'-x_{k-1}) <x_k -x_{k-1},(x_k-x') < x_k -x_{k-1},m_k''-m_k \le M_k -m_k,m_k'-m_k \le M_k -m_k$
那么
$L(f,P') - L(f,P)=(x'-x_{k-1})(m_k'-m_k) + (x_k-x')(m_k''-m_k) \le  (M_k - m_k)(x'-x_{k-1} + x_k -x')=(M_k-m_k)(x_k-x_{k-1}) \le (M-m)|P|=w|P|$
从而有$L(f,P') \le L(f,P) + w|P|$
总结就有$L(f,P)\le L(f,P') \le L(f,P) + w|P|$

(2)

所以$U(f,P)=\sum_{i=1}^{n}M_i \Delta x_i$

所以$U(f,P')=\sum_{i=1}^{n+1}M_i' \Delta x_i'$

为了方便起见，不妨记
$$M_k = \sup_{x \in [x_{k-1},x_k]}f(x),M_k'=\sup_{x \in [x_{k-1},x']}f(x),M_k''=\sup_{x \in [x',x_{k}]}f(x)$$

那么$U(f,P) - U(f,P')=M_k(x_k-x_{k-1}) - M_k'(x'-x_{k-1}) - M_k''(x_k-x')=(x'-x_{k-1})(M_k-M_k') + (x_k-x')(M_k-M_k'')$

同理还是有$M_k -M_k' \le M_k -m_k,M_k-M_k'' \le M_k -m_k $
对于达布上和则有
$U(f,P)-U(f,P') \ge 0$
另外
$U(f,P) - U(f,P')=M_k(x_k-x_{k-1}) - M_k'(x'-x_{k-1}) - M_k''(x_k-x')=(x'-x_{k-1})(M_k-M_k') + (x_k-x')(M_k-M_k'')\le (M_k-m_k)(x_k-x_{k-1}) \le w|P|$

所以有$U(f,P)\ge U(f,P') \ge U(f,P)-w|P|$

$\blacksquare$

[**推论**]设分割$P'$是有分割$P$添加$l$个分点而成，则
(1)$L(f,P) \le L(f,P')\le L(f,P) + lw|P|$
(2)$U(f,P) \ge U(f,P') \ge U(f,P) -lw|P|$

这个说明，在分点加密的过程中，下和是递增的，而上和是递减的．

[**引理２**]
设$P_1$和$P_2$是$[a,b]$上的任意两个分割，则有$L(f,P_1) \le U(f,P_2)$
proof:
设$P'$表示有$P_1$的分点与$P_2$的分点合成在一起组成的分割，则有
$$L(f,P_1) \le L(f,P') \le U(f,P') \le U(f,P_2)$$

$\blacksquare$

这个引理说明，所有上和组成的集合必然下界，从而有下确界，所有下和组成的集合是有上界的，从而有上确界．

为了方便起见，用$\overline{I}$为上和的下确界，用$\underline{I}$表示下和的上确界．
记$\underline{I} =\sup_{P}L(f,P),\overline{I}=\inf_{P}L(f,P)$
这里的$\sup_{P}L(f,P),\inf_{P}U(f,P)$分别表示对$[a,b]$的一切可能的分割$P$取$L(f,P)$的上确界与$U(f,P)$的下确界．
一般称$\overline{I},\underline{I}$称为达布上积分和达布下积分．

［**引理３**］记$\underline{I} =\sup_{P}L(f,P),\overline{I}=\inf_{P}L(f,P)$，
（１）$\overline{I} \ge \underline{I}$
（２）对于任意的分割有：$U(f,P)\ge \overline{I} \ge \underline{I} \ge L(f,P)$

proof:

根据引理２有
因为$L(f,P_1) \le U(f,P_2), \forall P_1,P_2$

那么两边同时对$P_2$做下确界，利用下确界的性质有$L(f,P_1) \le \inf_{P_2}U(f,P_2) = \overline{I}$

根据$L(f,P_1) \le \overline{I},\forall P_1$
取上确界，必然有$\sup_{P_1}L(f,P_1) \le \overline{I}$
即$\underline{I} \le \overline{I}$.

(2)第二个是显然的．

$\blacksquare$

[**引理4**]
对于$[a,b]$上的任意有界函数，有$\lim\limits_{|P| \to 0}L(f,P)=\underline{I},\lim\limits_{|P| \to 0}U(f,P)=\overline{I}$.
proof:
(1)因为$\underline{I}$是$L(f,P)$的上确界，即$\underline{I}=\sup_{P}L(f,P)$那么对于任意的$\varepsilon >0$,必然存在分割$P_0$, 使得$\underline{I}-\varepsilon/2<L(f,P_0) \le \underline{I}$
假设$P_0$有ｌ个分点．
任意给定一个分割$P$,如果把$P_0$和$P$的分点合在一起组成一个新的分割$P'$
根据达布下和的性质有
$\underline{I} \ge L(f,P) \\
\ge L(f,P') -lw|P| \\
\ge L(f,P_0)-lw|P| > \underline{I} - \varepsilon/2 -lw|P|$
可以认为在$P$的基础上加$P_0$的ｌ个分点组成了$P'$,此时至多添加了ｌ个分点，则有$L(f,P) \le L(f,P')\le L(f,P)+lw|P|$
有根据达布下和的单调性，知道$L(f,P')\ge L(f,P_0)$

只要$|P| < \frac{\varepsilon}{2lw +1}$
则有
$\underline{I} \ge L(f,P) \\
\ge L(f,P') -lw|P| \\
\ge L(f,P_0)-lw|P| > \underline{I} - \varepsilon/2 -lw|P| > \underline{I}-\varepsilon$


这个就证明了$\lim\limits_{|P| \to 0}L(f,P)=\underline{I}$

(2)
同理可以证明$\lim\limits_{|P| \to 0}U(f,P)=\overline{I}$

$\blacksquare$


[**定理**]
设$a,b\in R$,函数在闭区间$[a,b]$上有定义，并且是有界的：
则下面的三个条件是互相等价的
(1)$f(x)$在$[a,b]$上是可积的
(2)$\lim\limits_{|P| \to 0}\sum_{i=1}^{n}w_i \Delta x_i=0,w_i=M_i-m_i$
(3)函数$f(x)$在$[a,b]$的达布下积分和达布下积分是相等的$\overline{I}=\underline{I}$
proof:
$(1) \to (2)$
如果函数$f(x)$在区间里面可即，意味着，对于任意的$\varepsilon >0$,存在$\delta >0$,对于任意满足$|P| < \delta$条件的分割$P$都有
$I-\varepsilon/3<\sigma(f,P,\xi) < I + \varepsilon/3$
取定一个这样的分割，让$\xi_i \in [x_{i-1},x_i]$变动，取积分和的上下确界，则有
$I+\varepsilon/3 \ge L(f,P)=\inf_{\xi}\sigma(f,P,\xi) \ge I-\varepsilon/3 \\
I+\varepsilon/3 \ge U(f,P)=\sup_{\xi}\sigma(f,P,\xi) \ge I-\varepsilon/3 $
从而有$I-\varepsilon/3 \le L(f,P) \le U(f,P)\le I+\varepsilon/3$

有此可知$U(f,P)-L(f,P)=\sum_{i=1}^{n}w_i \Delta x_i \le 2\varepsilon/3$

那必然有$\lim\limits_{|P| \to 0}\sum_{i=1}^{n}w_i \Delta x_i = 0$

$(2) \to (3)$
$\lim\limits_{|P| \to 0}\sum_{i=1}^{n}w_i \Delta x_i =\lim\limits_{|P| \to 0}U(f,P)-\lim\limits_{|P| \to 0}L(f,P)=0$
这是因为对于有界函数而言，$\lim\limits_{|P| \to 0}U(f,P),\lim\limits_{|P| \to 0}L(f,P)$都是存在的．故有上面的结论．

另外对于任意的分割$P$,$U(f,P) -L(f,P) \ge \overline{I}-\underline{I} \ge 0$
当然有$\overline{I} = \overline{I}$

$(3) \to (1)$
记$\overline{I}=\underline{I}=I$
因为对于任意的分割有$L(f,P)\le \sigma(f,P,\xi) \le U(f,P)$
利用夹逼定理当然有$\lim\limits_{|P| \to 0}\sigma(f,P,\xi)=I$
从而函数是可积的．

$\blacksquare$

对于分割$P:a=x_0 < x_1 < ...< x_n=b$
记$\Omega(f,P)=\sum_{i=1}^{n}w_i \Delta x_i =U(f,P)-L(f,P)$

那么对于有界函数而言$\lim\limits_{|P| \to 0}\Omega(f,P)=\overline{I}-\underline{I}$


[**例题**]
1.狄利克雷函数$D(x)=\begin{cases}1 ,x \in Q,
\cr 0 ,x \in R \setminus Q
\end{cases}$
设$a,b \in ,a <b$，我们来考察函数$D(x)$在$[a,b]$是否可积．
解:
对于区间$[a,b]$上的任意分割Ｐ显然有
$\Omega(D(x),P)=\sum_{i=1}^{n}w_i \Delta x_i = b-a$
可见狄利克雷函数在任何闭区间上都是不可积的．

２．黎曼函数$R(x)=\begin{cases} \frac{1}{q} ,x=\frac{p}{q}(q >0)是即约分数
\cr 0,x \in R \setminus Q 
\end{cases}$

我们来证明函数$R(x)$在任何闭区间[a,b]都是可积的

解：任意给定的$\varepsilon >0$,满足$\frac{1}{q} \ge \varepsilon$则有$q \le \frac{1}{\varepsilon}$而$q \in \N$,那么这样的点总是有限的．




［**定理**］
有界函数在$f(x)$在$[a,b]$上可积的，充分必要条件是$\lim\limits_{|P| \to 0}\sum_{i=1}^{n}w_i \Delta x_i=0$

有了这个定理，便可以用来判断函数的可积性质．

## 可积函数类






